<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Stoja Trade - AI-Powered Real Estate Assistant Demo"
    />
    <title>Stoja Trade AI Assistant Demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- ElevenLabs Widget Positioning -->
    <style>
      #elevenlabs-widget-container {
        position: fixed !important;
        left: 20px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        z-index: 9998 !important;
        pointer-events: none !important;
      }
      
      #elevenlabs-widget-container elevenlabs-convai {
        pointer-events: auto !important;
        position: relative !important;
        display: block !important;
      }
    </style>
    <script>
      // Inject styles into shadow DOM to fix positioning
      function injectShadowStyles() {
        const widget = document.querySelector('elevenlabs-convai');
        if (!widget || !widget.shadowRoot) return;
        
        const shadowRoot = widget.shadowRoot;
        
        // Create or update style element in shadow DOM
        let styleEl = shadowRoot.querySelector('style[data-position-fix]');
        if (!styleEl) {
          styleEl = document.createElement('style');
          styleEl.setAttribute('data-position-fix', 'true');
          shadowRoot.appendChild(styleEl);
        }
        
        // Inject CSS to override fixed positioning
        styleEl.textContent = `
          * {
            position: relative !important;
            left: 0 !important;
            right: auto !important;
          }
          [style*="position: fixed"], [style*="position:fixed"] {
            position: relative !important;
            left: 0 !important;
            right: auto !important;
          }
        `;
      }
      
      // Ensure widget container stays positioned correctly
      function ensureWidgetPosition() {
        const container = document.getElementById('elevenlabs-widget-container');
        if (container) {
          container.style.cssText = `
            position: fixed !important;
            left: 20px !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            z-index: 9998 !important;
            pointer-events: none !important;
          `;
        }
        
        // Inject shadow DOM styles
        injectShadowStyles();
      }
      
      // Run on load
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', ensureWidgetPosition);
      } else {
        ensureWidgetPosition();
      }
      
      window.addEventListener('load', ensureWidgetPosition);
      window.addEventListener('resize', ensureWidgetPosition);
      
      // Aggressive polling to catch shadow DOM initialization
      let attempts = 0;
      const interval = setInterval(function() {
        ensureWidgetPosition();
        attempts++;
        if (attempts > 40) clearInterval(interval);
      }, 500);
      
      // MutationObserver for shadow DOM changes
      const observer = new MutationObserver(function() {
        ensureWidgetPosition();
      });
      
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
    </script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <!-- ElevenLabs Conversational AI Widget - Wrapped in positioned container -->
    <div id="elevenlabs-widget-container" style="position: fixed; left: 20px; top: 50%; transform: translateY(-50%); z-index: 9998; pointer-events: none;">
      <elevenlabs-convai agent-id="agent_7701k80ng0s4e9dasnydy605s42g" style="pointer-events: auto;"></elevenlabs-convai>
    </div>
    <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>
  </body>
</html>

